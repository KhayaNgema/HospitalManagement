@model HospitalManagement.ViewModels.NewSupplierViewModel

@{
    ViewData["Title"] = "New Supplier";
    Layout = "~/Views/Shared/_PagesLayout.cshtml";
}

<!-- Header Bar -->
<div class="d-flex align-items-center justify-content-between px-3 py-3 mb-4" style="background-color:#48AAAD;">
    <div class="d-flex align-items-center">
        <a asp-controller="Home" asp-action="Index" class="text-white text-decoration-none d-inline-flex align-items-center back-link me-3">
            <i class="bi bi-chevron-left me-1"></i> Back
        </a>
        <h2 class="mb-0 text-white">New Supplier</h2>
    </div>
</div>

<!-- Centered form container -->
<div class="container d-flex justify-content-center my-5">
    <form asp-action="NewSupplier" method="post" enctype="multipart/form-data" class="w-100" style="max-width: 700px;">
        <div class="p-4 border rounded bg-white shadow-sm">
            <h5 class="mb-4 text-center">Supplier Details</h5>
            <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

            <div class="mb-3 text-center">
                <div class="position-relative d-inline-block" style="width:150px; height:150px; border:1px solid #ccc; border-radius: 10px; overflow:hidden;">
                    <i class="fa fa-club" id="club-badge-placeholder" style="font-size: 90px; color: #f0f0f0; line-height: 150px;"></i>
                    <img id="club-badge-preview" alt="Supplier Logo Preview" class="img-fluid" style="display:none; max-height:150px; max-width:150px;" />
                    <label for="Input_ClubBadge" class="position-absolute" style="bottom:10px; right:10px; cursor:pointer; color:#000325; z-index:10;">
                        <i class="fa fa-camera" style="font-size: 30px;"></i>
                        <input asp-for="SupplierBadges" id="Input_ClubBadge" class="form-control" type="file" onchange="previewClubBadge(event)" accept="image/*" style="display:none;" />
                    </label>
                </div>
                <small class="form-text text-muted mt-2 d-block">Upload a supplier logo (optional)</small>
            </div>

            <div class="form-floating mb-3">
                <input asp-for="SupplierName" class="form-control" placeholder="Supplier Name" />
                <label asp-for="SupplierName">Supplier Name</label>
                <span asp-validation-for="SupplierName" class="text-danger"></span>
            </div>

            <div class="form-floating mb-3">
                <textarea asp-for="DivisionDescription" class="form-control" placeholder="Division Description" style="min-height: 150px;"></textarea>
                <label asp-for="DivisionDescription">Division Description</label>
                <span asp-validation-for="DivisionDescription" class="text-danger"></span>
            </div>

            <div class="form-floating mb-3">
                <input asp-for="StreetLine1" class="form-control" placeholder="Street Address 1" />
                <label asp-for="StreetLine1">Street Address 1</label>
                <span asp-validation-for="StreetLine1" class="text-danger"></span>
            </div>

            <div class="form-floating mb-3">
                <input asp-for="StreetLine2" class="form-control" placeholder="Street Address 2" />
                <label asp-for="StreetLine2">Street Address 2</label>
                <span asp-validation-for="StreetLine2" class="text-danger"></span>
            </div>

            <div class="form-floating mb-3">
                <input asp-for="Suburb" class="form-control" placeholder="Suburb" />
                <label asp-for="Suburb">Suburb</label>
                <span asp-validation-for="Suburb" class="text-danger"></span>
            </div>

            <div class="form-floating mb-3">
                <input asp-for="City" class="form-control" placeholder="City" />
                <label asp-for="City">City</label>
                <span asp-validation-for="City" class="text-danger"></span>
            </div>

            <div class="form-floating mb-3">
                <input asp-for="Country" class="form-control" placeholder="Country" />
                <label asp-for="Country">Country</label>
                <span asp-validation-for="Country" class="text-danger"></span>
            </div>

            <div class="form-floating mb-3">
                <select asp-for="Province" class="form-select" asp-items="Html.GetEnumSelectList<HospitalManagement.Models.Province>()"></select>
                <label asp-for="Province">Province</label>
                <span asp-validation-for="Province" class="text-danger"></span>
            </div>

            <div class="text-end mt-4">
                <input type="submit" value="Submit" class="btn btn-primary" />
            </div>
        </div>
    </form>
</div>


@section Scripts {
    <script>
        function previewClubBadge(event) {
            var reader = new FileReader();
            reader.onload = function () {
                var output = document.getElementById('club-badge-preview');
                output.src = reader.result;
                output.style.display = 'block';
                document.getElementById('club-badge-placeholder').style.display = 'none';
            };
            reader.readAsDataURL(event.target.files[0]);
        }
    </script>
    <partial name="_ValidationScriptsPartial" />
}
