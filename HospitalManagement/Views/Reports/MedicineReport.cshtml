@{
    ViewData["Title"] = "Medication Dashboard";
    Layout = "~/Views/Shared/_PagesLayout.cshtml";
}

<style>
    .dashboard-pane {
        border: 2px solid #48AAAD;
        border-radius: 10px;
        background-color: #ffffff;
        padding: 15px;
        margin-bottom: 20px;
        height: 350px;
    }

    .dashboard-title {
        font-weight: bold;
        margin-bottom: 10px;
        color: #022D36;
    }

    .chart-canvas {
        width: 100% !important;
        height: 270px !important;
    }

    .dashboard-row {
        margin-bottom: 20px;
    }
</style>

<div class="container mt-4">
    <div class="row dashboard-row">
        <div class="col-md-4">
            <div class="dashboard-pane">
                <div class="dashboard-title">Medication Usage (Line Chart)</div>
                <canvas id="medicationLineChart" class="chart-canvas"></canvas>
            </div>
        </div>
        <div class="col-md-4">
            <div class="dashboard-pane">
                <div class="dashboard-title">Medication Types (Pie Chart)</div>
                <canvas id="medicationPieChart" class="chart-canvas"></canvas>
            </div>
        </div>
        <div class="col-md-4">
            <div class="dashboard-pane">
                <div class="dashboard-title">Prescriptions by Category (Bar Chart)</div>
                <canvas id="prescriptionBarChart" class="chart-canvas"></canvas>
            </div>
        </div>
    </div>

    <div class="row dashboard-row">
        <div class="col-md-6">
            <div class="dashboard-pane">
                <div class="dashboard-title">Top Prescribed Medications (Table)</div>
                <table class="table table-bordered">
                    <thead class="table-light">
                        <tr>
                            <th>Name</th>
                            <th>Prescriptions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Paracetamol</td><td>120</td></tr>
                        <tr><td>Ibuprofen</td><td>90</td></tr>
                        <tr><td>Amoxicillin</td><td>75</td></tr>
                        <tr><td>Metformin</td><td>60</td></tr>
                        <tr><td>Amlodipine</td><td>45</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-6">
            <div class="dashboard-pane">
                <div class="dashboard-title">Monthly Prescription Trends</div>
                <canvas id="monthlyTrendsChart" class="chart-canvas"></canvas>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const lineCtx = document.getElementById('medicationLineChart');
        new Chart(lineCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Medications',
                    data: [30, 45, 40, 60, 50, 70],
                    borderColor: '#48AAAD',
                    backgroundColor: 'rgba(72, 170, 173, 0.2)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: { responsive: true, maintainAspectRatio: false }
        });

        const pieCtx = document.getElementById('medicationPieChart');
        new Chart(pieCtx, {
            type: 'pie',
            data: {
                labels: ['Antibiotics', 'Painkillers', 'Diabetes', 'Cardiac'],
                datasets: [{
                    label: 'Type',
                    data: [40, 25, 20, 15],
                    backgroundColor: ['#48AAAD', '#6ec1c4', '#b2e3e5', '#d1f4f5'],
                    borderColor: '#ffffff',
                    borderWidth: 2
                }]
            },
            options: { responsive: true, maintainAspectRatio: false }
        });

        const barCtx = document.getElementById('prescriptionBarChart');
        new Chart(barCtx, {
            type: 'bar',
            data: {
                labels: ['Children', 'Adults', 'Seniors'],
                datasets: [{
                    label: 'Prescriptions',
                    data: [30, 80, 60],
                    backgroundColor: '#48AAAD'
                }]
            },
            options: { responsive: true, maintainAspectRatio: false }
        });

        const trendsCtx = document.getElementById('monthlyTrendsChart');
        new Chart(trendsCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Prescriptions',
                    data: [50, 55, 60, 58, 65, 70],
                    borderColor: '#48AAAD',
                    backgroundColor: 'rgba(72, 170, 173, 0.2)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: { responsive: true, maintainAspectRatio: false }
        });
    </script>
}
